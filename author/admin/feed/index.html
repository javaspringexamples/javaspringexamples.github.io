<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>admin &#8211; Java and Spring Examples</title>
	<atom:link href="http://localhost/wordpress/author/admin/feed/" rel="self" type="application/rss+xml" />
	<link>http://localhost/wordpress</link>
	<description></description>
	<lastBuildDate>Wed, 26 Jun 2019 15:04:13 +0000</lastBuildDate>
	<language>fr-FR</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.0.4</generator>
	<item>
		<title>Example Spring 4 JPA – Data Access Exception Translating</title>
		<link>http://localhost/wordpress/2019/06/26/example-spring-4-jpa-data-access-exception-translating/</link>
		<pubDate>Wed, 26 Jun 2019 15:01:27 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Exception Translating]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=648</guid>
		<description><![CDATA[This example presents the basic concept of translating data access exceptions in Spring. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of translating data access exceptions in Spring.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJPA&lt;/groupId&gt;
	&lt;artifactId&gt;springJPAExceptionTranslating&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;

</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJPA.ExceptionTranslating;

import java.util.HashMap;
import java.util.Map;

import javax.sql.DataSource;

import org.hibernate.jpa.HibernatePersistenceProvider;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Configuration
public class Conf {

	@Bean
	public DataSource dataSource() {
		DriverManagerDataSource dataSource = new DriverManagerDataSource();
		dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
		dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
		dataSource.setUsername(&quot;sa&quot;);
		dataSource.setPassword(&quot;&quot;);
		return dataSource;
	}

	private Map&lt;String, ?&gt; jpaProperties() {
		Map&lt;String, String&gt; jpaPropertiesMap = new HashMap&lt;String, String&gt;();
		jpaPropertiesMap.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.H2Dialect&quot;);
		jpaPropertiesMap.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);
		return jpaPropertiesMap;
	}

	@Bean
	public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
		LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();
		factoryBean.setPersistenceProviderClass(HibernatePersistenceProvider.class);
		factoryBean.setDataSource(dataSource());
		factoryBean.setPackagesToScan(&quot;javaspringexamples.springJPA.ExceptionTranslating&quot;);
		factoryBean.setJpaPropertyMap(jpaProperties());
		return factoryBean;
	}

	@Bean
	public PersonDAO personDao() {
		PersonDAOImpl dao = new PersonDAOImpl();
		return dao;
	}

	@Bean
	public static PersistenceExceptionTranslationPostProcessor persistenceExceptionTranslationPostProcessor() {
		PersistenceExceptionTranslationPostProcessor bean = new PersistenceExceptionTranslationPostProcessor();
		return bean;
	}

}

</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJPA.ExceptionTranslating;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.dao.DataAccessException;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {

	public static void main(String[] args) {
		ApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);

		PersonDAO dao = (PersonDAO) applicationContext.getBean(&quot;personDao&quot;);
		// Creating person object
		Person person = new Person();
		person.setFirstName(null);
		person.setLastName(&quot;KOLOBANE&quot;);

		// Spring handles different types of data access exceptions thrown from the data
		// access layer, and translates them into
		// org.springframework.dao.DataAccessException.
		try {
			// Saving person
			dao.save(person);
		} catch (DataAccessException dae) {
			System.out.println(&quot;Exception translated by Spring and handled&quot;);
		}
	}
}
</pre>
<pre class="brush: java; title: Person.java; notranslate">
package javaspringexamples.springJPA.ExceptionTranslating;

import javax.persistence.Basic;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Entity
public class Person {

	@Id
	@GeneratedValue
	private Long id;

	@Basic(optional=false)
	private String firstName;

	private String lastName;

	public Long getId() {
		return id;
	}

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}
}

</pre>
<pre class="brush: java; title: PersonDAO.java; notranslate">
package javaspringexamples.springJPA.ExceptionTranslating;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface PersonDAO {
	public void save(Person p);
}

</pre>
<pre class="brush: java; title: PersonDAOImpl.java; notranslate">
package javaspringexamples.springJPA.ExceptionTranslating;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.PersistenceUnit;

import org.springframework.stereotype.Repository;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */

@Repository
public class PersonDAOImpl implements PersonDAO {

	@PersistenceUnit
	private EntityManagerFactory emf;

	public void save(Person p) {
		EntityManager em = emf.createEntityManager();
		EntityTransaction transaction = em.getTransaction();
		transaction.begin();
		em.persist(p);
		transaction.commit();
		em.close();
	}
}

</pre>
<p><a href="https://github.com/javaspringexamples/springJPAExceptionTranslating.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJPAExceptionTranslating/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JPA – @PersistenceUnit</title>
		<link>http://localhost/wordpress/2019/06/26/example-spring-4-jpa-persistenceunit/</link>
		<pubDate>Wed, 26 Jun 2019 14:54:33 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[PersistenceUnit]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=645</guid>
		<description><![CDATA[This example presents the basic concept of using PersistenceUnit in Spring. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can convert this...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using PersistenceUnit in Spring.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJPA&lt;/groupId&gt;
	&lt;artifactId&gt;springJPAPersistenceUnit&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;

</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJPA.PersistenceUnit;

import java.util.HashMap;
import java.util.Map;

import javax.sql.DataSource;

import org.hibernate.jpa.HibernatePersistenceProvider;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;

@Configuration
public class Conf {

	@Bean
	public DataSource dataSource() {
		DriverManagerDataSource dataSource = new DriverManagerDataSource();
		dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
		dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
		dataSource.setUsername(&quot;sa&quot;);
		dataSource.setPassword(&quot;&quot;);
		return dataSource;
	}

	private Map&lt;String, ?&gt; jpaProperties() {
		Map&lt;String, String&gt; jpaPropertiesMap = new HashMap&lt;String, String&gt;();
		jpaPropertiesMap.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.H2Dialect&quot;);
		jpaPropertiesMap.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);
		return jpaPropertiesMap;
	}

	@Bean
	public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
		LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();
		factoryBean.setPersistenceProviderClass(HibernatePersistenceProvider.class);
		factoryBean.setDataSource(dataSource());
		factoryBean.setPackagesToScan(&quot;javaspringexamples.springJPA.PersistenceUnit&quot;);
		factoryBean.setJpaPropertyMap(jpaProperties());
		return factoryBean;
	}

	@Bean
	public PersonDAO personDao() {
		PersonDAOImpl dao = new PersonDAOImpl();
		return dao;
	}

}

</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJPA.PersistenceUnit;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {

	public static void main(String[] args) {
		ApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);

		PersonDAO dao = (PersonDAO) applicationContext.getBean(&quot;personDao&quot;);
		// Creating person object
		Person person = new Person();
		person.setFirstName(&quot;Jabane&quot;);
		person.setLastName(&quot;KOLOBANE&quot;);
		// Saving person
		dao.save(person);
	}
}
</pre>
<pre class="brush: java; title: Person.java; notranslate">
package javaspringexamples.springJPA.PersistenceUnit;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Entity
public class Person {

	@Id
	@GeneratedValue
	private Long id;

	private String firstName;

	private String lastName;

	public Long getId() {
		return id;
	}

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}
}

</pre>
<pre class="brush: java; title: PersonDAO.java; notranslate">
package javaspringexamples.springJPA.PersistenceUnit;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface PersonDAO {
	public void save(Person p);
}

</pre>
<pre class="brush: java; title: PersonDAOImpl.java; notranslate">
package javaspringexamples.springJPA.PersistenceUnit;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.PersistenceUnit;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */

public class PersonDAOImpl implements PersonDAO {

	@PersistenceUnit
	private EntityManagerFactory emf;

	public void save(Person p) {
		EntityManager em = emf.createEntityManager();
		EntityTransaction transaction = em.getTransaction();
		transaction.begin();
		em.persist(p);
		transaction.commit();
		em.close();
	}
}

</pre>
<p><a href="https://github.com/javaspringexamples/springJPAPersistenceUnit.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJPAPersistenceUnit/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JPA – @PersistenceContext</title>
		<link>http://localhost/wordpress/2019/06/26/example-spring-4-jpa-persistencecontext/</link>
		<pubDate>Wed, 26 Jun 2019 14:50:35 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[PersistenceContext]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=643</guid>
		<description><![CDATA[This example presents the basic concept of using PersistenceContext in Spring. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can convert this...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using PersistenceContext in Spring.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJPA&lt;/groupId&gt;
	&lt;artifactId&gt;springJPAPersistenceContext&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;

</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJPA.PersistenceContext;

import java.util.HashMap;
import java.util.Map;

import javax.persistence.EntityManagerFactory;
import javax.sql.DataSource;

import org.hibernate.jpa.HibernatePersistenceProvider;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.orm.jpa.JpaTransactionManager;
import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;
import org.springframework.transaction.PlatformTransactionManager;
import org.springframework.transaction.annotation.EnableTransactionManagement;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Configuration
@EnableTransactionManagement
public class Conf {

	@Bean
	public DataSource dataSource() {
		DriverManagerDataSource dataSource = new DriverManagerDataSource();
		dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
		dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
		dataSource.setUsername(&quot;sa&quot;);
		dataSource.setPassword(&quot;&quot;);
		return dataSource;
	}

	private Map&lt;String, ?&gt; jpaProperties() {
		Map&lt;String, String&gt; jpaPropertiesMap = new HashMap&lt;String, String&gt;();
		jpaPropertiesMap.put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.H2Dialect&quot;);
		jpaPropertiesMap.put(&quot;hibernate.hbm2ddl.auto&quot;, &quot;update&quot;);
		return jpaPropertiesMap;
	}

	@Bean
	public LocalContainerEntityManagerFactoryBean entityManagerFactory() {
		LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();
		factoryBean.setPersistenceProviderClass(HibernatePersistenceProvider.class);
		factoryBean.setDataSource(dataSource());
		factoryBean.setPackagesToScan(&quot;javaspringexamples.springJPA.PersistenceContext&quot;);
		factoryBean.setJpaPropertyMap(jpaProperties());
		return factoryBean;
	}

	@Bean
	public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {
		JpaTransactionManager transactionManager = new JpaTransactionManager();
		transactionManager.setEntityManagerFactory(entityManagerFactory);
		return transactionManager;
	}

	@Bean
	public PersonDAO personDao() {
		PersonDAOImpl dao = new PersonDAOImpl();
		return dao;
	}

}

</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJPA.PersistenceContext;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {

	public static void main(String[] args) {
		ApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);

		PersonDAO dao = (PersonDAO) applicationContext.getBean(&quot;personDao&quot;);
		// Creating person object
		Person person = new Person();
		person.setFirstName(&quot;Jabane&quot;);
		person.setLastName(&quot;KOLOBANE&quot;);
		// Saving person
		dao.save(person);
	}
}
</pre>
<pre class="brush: java; title: Person.java; notranslate">
package javaspringexamples.springJPA.PersistenceContext;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Entity
public class Person {

	@Id
	@GeneratedValue
	private Long id;

	private String firstName;

	private String lastName;

	public Long getId() {
		return id;
	}

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}
}

</pre>
<pre class="brush: java; title: PersonDAO.java; notranslate">
package javaspringexamples.springJPA.PersistenceContext;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface PersonDAO {
	public void save(Person p);
}

</pre>
<pre class="brush: java; title: PersonDAOImpl.java; notranslate">
package javaspringexamples.springJPA.PersistenceContext;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.transaction.Transactional;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */

@Transactional
public class PersonDAOImpl implements PersonDAO {

	@PersistenceContext
	private EntityManager entityManager;

	public void save(Person p) {
		//EntityTransaction transaction = entityManager.getTransaction();
		//transaction.begin();
		entityManager.persist(p);
		//transaction.commit();
		entityManager.close();
	}
}

</pre>
<p><a href="https://github.com/javaspringexamples/springJPAPersistenceContext.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJPAPersistenceContext/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JPA – JPQL Examples</title>
		<link>http://localhost/wordpress/2019/06/26/example-spring-4-jpa-jpql-examples/</link>
		<pubDate>Wed, 26 Jun 2019 14:46:53 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[JPQL]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=641</guid>
		<description><![CDATA[This example presents the basic concept of using JPQL in Spring. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can convert this...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using JPQL in Spring.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJPA&lt;/groupId&gt;
	&lt;artifactId&gt;springJPAQL&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;

</pre>
<pre class="brush: java; title: Car.java; notranslate">
package javaspringexamples.springJPA.JPAQL;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Entity
public class Car {
	@Id
	@GeneratedValue
	private Long id;

	private String model;

	public String getModel() {
		return model;
	}

	public void setModel(String model) {
		this.model = model;
	}

	public Long getId() {
		return id;
	}
}
</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJPA.JPAQL;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;
import javax.persistence.Query;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {

	public static void main(String[] args) {
		EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;test-jpa&quot;);
		EntityManager entityManager = entityManagerFactory.createEntityManager();
		EntityTransaction transaction = entityManager.getTransaction();

		transaction.begin();
		// Creating entities
		Person person = new Person();
		person.setFirstName(&quot;Jabane&quot;);
		person.setLastName(&quot;KOLOBANE&quot;);
		Car car1 = new Car();
		car1.setModel(&quot;R4&quot;);
		Car car2 = new Car();
		car2.setModel(&quot;R6&quot;);
		// Add cars into person's collection
		person.getCars().add(car1);
		person.getCars().add(car2);
		// persisting entities
		entityManager.persist(person);

		// SELECT
		Query query = entityManager.createQuery(&quot;Select p from Person p&quot;);
		List&lt;Person&gt; l_p = query.getResultList();
		for (Person p : l_p)
			System.out.println(p);

		// UPDATE
		query = entityManager.createQuery(&quot;Update Person set firstName = ?&quot;);
		query.setParameter(1, &quot;waaaaaaaaaaa&quot;);
		query.executeUpdate();

		transaction.commit();
		entityManager.close();
	}
}

</pre>
<pre class="brush: java; title: Person.java; notranslate">
package javaspringexamples.springJPA.JPAQL;

import java.util.HashSet;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Entity
public class Person {

	@Id
	@GeneratedValue
	private Long id;

	private String firstName;

	private String lastName;

	@OneToMany(cascade = CascadeType.ALL)
	@JoinColumn(name = &quot;person_id&quot;)
	private Set&lt;Car&gt; cars = new HashSet&lt;Car&gt;();

	public Long getId() {
		return id;
	}

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}

	public Set&lt;Car&gt; getCars() {
		return cars;
	}

	@Override
	public String toString() {
		StringBuffer str = new StringBuffer(firstName + &quot; &quot; + lastName + &quot; : &quot;);
		for (Car c : cars)
			str.append(&quot;'&quot; + c.getModel() + &quot;' &quot;);
		return str.toString();
	}
}

</pre>
<pre class="brush: xml; title: persistence.xml; notranslate">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;persistence version=&quot;2.0&quot;
    xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; 
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;
    &lt;persistence-unit name=&quot;test-jpa&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;
        &lt;properties&gt;
            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;org.h2.Driver&quot; /&gt;
            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot; /&gt;
            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;sa&quot; /&gt;
            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;&quot; /&gt;
            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.H2Dialect&quot; /&gt;
            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot; /&gt;
            &lt;!-- property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot; /--&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</pre>
<p><a href="https://github.com/javaspringexamples/springJPAQL.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJPAQL/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JPA – JPA CRUD Examples</title>
		<link>http://localhost/wordpress/2019/06/26/example-spring-4-jpa-jpa-crud-examples/</link>
		<pubDate>Wed, 26 Jun 2019 14:38:03 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[JPA CRUD]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=632</guid>
		<description><![CDATA[This example presents the basic concept of using JPA CRUD in Spring. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.8 &#8211; Maven 3.3.9 You can convert...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using JPA CRUD in Spring.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.8<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJPA&lt;/groupId&gt;
	&lt;artifactId&gt;CRUD&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;
			&lt;version&gt;4.3.1.Final&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;

</pre>
<pre class="brush: java; title: Car.java; notranslate">
package javaspringexamples.springJPA.CRUD;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Entity
public class Car {
	@Id
	@GeneratedValue
	private Long id;

	private String model;

	public String getModel() {
		return model;
	}

	public void setModel(String model) {
		this.model = model;
	}

	public Long getId() {
		return id;
	}
}
</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJPA.CRUD;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {

	public static void main(String[] args) {
		EntityManagerFactory entityManagerFactory = Persistence.createEntityManagerFactory(&quot;test-jpa&quot;);
		EntityManager entityManager = entityManagerFactory.createEntityManager();
		EntityTransaction transaction = entityManager.getTransaction();

		transaction.begin();
		// Creating entities
		Person person = new Person();
		person.setFirstName(&quot;Jabane&quot;);
		person.setLastName(&quot;KOLOBANE&quot;);
		Car car1 = new Car();
		car1.setModel(&quot;R4&quot;);
		Car car2 = new Car();
		car2.setModel(&quot;R6&quot;);
		// Add cars into person's collection
		person.getCars().add(car1);
		person.getCars().add(car2);
		// persisting entities
		entityManager.persist(person);
		System.out.println(person);
		//detaching cars
		long id = person.getId();
		person.getCars().clear();
		System.out.println(person);
		// Delete person
		entityManager.remove(person);
		// find displays null
		person = entityManager.find(Person.class, id);
		System.out.println(&quot;Find : &quot; + person);
		// getReference throws javax.persistence.EntityNotFoundException
		person = entityManager.getReference(Person.class, id);
		System.out.println(&quot;getReference: &quot; + person);

		transaction.commit();
		entityManager.close();
	}
}

</pre>
<pre class="brush: java; title: Person.java; notranslate">
package javaspringexamples.springJPA.CRUD;

import java.util.HashSet;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Entity
public class Person {

	@Id
	@GeneratedValue
	private Long id;

	private String firstName;

	private String lastName;

	@OneToMany(cascade = CascadeType.ALL)
	@JoinColumn(name = &quot;person_id&quot;)
	private Set&lt;Car&gt; cars = new HashSet&lt;Car&gt;();

	public Long getId() {
		return id;
	}

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}

	public Set&lt;Car&gt; getCars() {
		return cars;
	}

	@Override
	public String toString() {
		StringBuffer str = new StringBuffer(firstName + &quot; &quot; + lastName + &quot; : &quot;);
		for (Car c : cars)
			str.append(&quot;'&quot; + c.getModel() + &quot;' &quot;);
		return str.toString();
	}
}

</pre>
<pre class="brush: xml; title: persistence.xml; notranslate">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;persistence version=&quot;2.0&quot;
    xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; 
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot;&gt;
    &lt;persistence-unit name=&quot;test-jpa&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;
        &lt;properties&gt;
            &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;org.h2.Driver&quot; /&gt;
            &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot; /&gt;
            &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;sa&quot; /&gt;
            &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;&quot; /&gt;
            &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.H2Dialect&quot; /&gt;
            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot; /&gt;
            &lt;!-- property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;update&quot; /--&gt;
        &lt;/properties&gt;
    &lt;/persistence-unit&gt;
&lt;/persistence&gt;
</pre>
<p><a href="https://github.com/javaspringexamples/springJPACRUD.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJPACRUD/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JDBC – Batch Operations</title>
		<link>http://localhost/wordpress/2019/06/18/example-spring-4-jdbc-batch-operations/</link>
		<pubDate>Tue, 18 Jun 2019 11:56:35 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Batch Operations]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=621</guid>
		<description><![CDATA[This example presents the basic concept of using batch operations in Spring JDBC. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using batch operations in Spring JDBC.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJDBC&lt;/groupId&gt;
	&lt;artifactId&gt;springJdbcBatchOperations&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
			&lt;artifactId&gt;lombok&lt;/artifactId&gt;
			&lt;version&gt;1.18.6&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

&lt;/project&gt;
</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJDBC.batchOperations;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.Resource;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.jdbc.datasource.init.DataSourceInitializer;
import org.springframework.jdbc.datasource.init.DatabasePopulator;
import org.springframework.jdbc.datasource.init.ResourceDatabasePopulator;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Configuration
public class Conf {

	@Value(&quot;classpath:schema.sql&quot;)
	private Resource schemaScript;

	@Value(&quot;classpath:data.sql&quot;)
	private Resource dataScript;

	@Bean
	public DataSource dataSource() {
		DriverManagerDataSource dataSource = new DriverManagerDataSource();
		dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
		dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
		dataSource.setUsername(&quot;sa&quot;);
		dataSource.setPassword(&quot;&quot;);
		return dataSource;
	}

	@Bean
	public DataSourceInitializer dataSourceInitializer(final DataSource dataSource) {
		final DataSourceInitializer initializer = new DataSourceInitializer();
		initializer.setDataSource(dataSource);
		initializer.setDatabasePopulator(databasePopulator());
		return initializer;
	}

	private DatabasePopulator databasePopulator() {
		final ResourceDatabasePopulator populator = new ResourceDatabasePopulator();
		populator.addScript(schemaScript);
		populator.addScript(dataScript);
		return populator;
	}

	@Bean
	public JdbcTemplate jdbcTemplate() {
		JdbcTemplate jdbcTemplate = new JdbcTemplate();
		jdbcTemplate.setDataSource(dataSource());
		return jdbcTemplate;
	}

	@Bean
	public UserDao userDao() {
		UserDaoImpl userDao = new UserDaoImpl();
		userDao.setJdbcTemplate(jdbcTemplate());
		return userDao;
	}
}

</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJDBC.batchOperations;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {
	public static void main(String[] args) throws SQLException {
		AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);

		List&lt;Long&gt; usersIds = new ArrayList&lt;&gt;();
		usersIds.add(65L);
		usersIds.add(256L);
		usersIds.add(999L);
		
		UserDao userDao = applicationContext.getBean(UserDao.class);
		List&lt;User&gt; users = userDao.find(usersIds);
		for (User user : users) {
			System.out.println(user.toString());
			user.setName(&quot;Waaaaaaw&quot;);
			user.setUserName(&quot;No no noooooooooo&quot;);
		}

		User u = new User();
		u.setId(36L);
		u.setName(&quot;:-|&quot;);
		users.add(u);
		
		userDao.update(users);

		users = userDao.find(usersIds);
		for (User user : users) {
			System.out.println(user.toString());
		}
	}
}
</pre>
<pre class="brush: java; title: UpdateFailedException.java; notranslate">
package javaspringexamples.springJDBC.batchOperations;

import org.springframework.dao.DataAccessException;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UpdateFailedException extends DataAccessException {
	public UpdateFailedException(String msg) {
		super(msg);
	}
}

</pre>
<pre class="brush: java; title: User.java; notranslate">
package javaspringexamples.springJDBC.batchOperations;

import java.util.Date;

import lombok.Data;
import lombok.ToString;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Data
public class User {
	private long id;
	private String name;
	private String userName;
	@ToString.Exclude
	private Date accessTime;
	private boolean locked;
}
</pre>
<pre class="brush: java; title: UserDao.java; notranslate">
package javaspringexamples.springJDBC.batchOperations;

import java.util.List;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface UserDao {
	List&lt;User&gt; find(List&lt;Long&gt; userIds);
	void update(final List&lt;User&gt; users);
}
</pre>
<pre class="brush: java; title: UserDaoImpl.java; notranslate">
package javaspringexamples.springJDBC.batchOperations;

import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.List;

import org.springframework.jdbc.core.BatchPreparedStatementSetter;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.jdbc.core.namedparam.SqlParameterSource;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserDaoImpl implements UserDao {

	private JdbcTemplate jdbcTemplate;
	private NamedParameterJdbcTemplate namedParameterJdbcTemplate;
	private UserRowMapper userRowMapper = new UserRowMapper();

	public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
		this.jdbcTemplate = jdbcTemplate;
		namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(jdbcTemplate);
	}

	public List&lt;User&gt; find(List&lt;Long&gt; userIds) {
		SqlParameterSource sqlParameterSource = new MapSqlParameterSource(&quot;userIds&quot;, userIds);
		return namedParameterJdbcTemplate.query(&quot;select * from user where id in (:userIds)&quot;, sqlParameterSource,
				userRowMapper);
	}

	public void update(final List&lt;User&gt; users) {
		int[] counts = jdbcTemplate.batchUpdate(&quot;update user set (name, user_name, locked) = (?,?,?) where id = ?&quot;,
				new BatchPreparedStatementSetter() {
					public void setValues(PreparedStatement ps, int i) throws SQLException {
						User user = users.get(i);
						ps.setString(1, user.getName());
						ps.setString(2, user.getUserName());
						ps.setBoolean(3, user.isLocked());
						ps.setLong(4, user.getId());
					}

					public int getBatchSize() {
						return users.size();
					}
				});
		int i = 0;
		for (int count : counts) {
			if (count == 0)
				throw new UpdateFailedException(&quot;Row not updated :&quot; + i);
			i++;
		}
	}
}

</pre>
<pre class="brush: java; title: UserRowMapper.java; notranslate">
package javaspringexamples.springJDBC.batchOperations;

import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.jdbc.core.RowMapper;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserRowMapper implements RowMapper&lt;User&gt; {

	public User mapRow(ResultSet rs, int rowNum) throws SQLException {
		User user = new User();
		user.setId(rs.getLong(&quot;id&quot;));
		user.setName(rs.getString(&quot;name&quot;));
		user.setUserName(rs.getString(&quot;user_name&quot;));
		user.setAccessTime(rs.getTimestamp(&quot;access_time&quot;));
		user.setLocked(rs.getBoolean(&quot;locked&quot;));
		return user;
	}

}

</pre>
<pre class="brush: java; title: data.sql; notranslate">
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (999L, 'Mounir SAHRANI', 'msahrani', '2019-01-01',false);
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (256L, 'Laurent SOURDEAU', 'lsourdeau', '2019-06-01',false);
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (65L, 'John SMITH', 'jsmith', '2019-06-01',true);
</pre>
<pre class="brush: java; title: schema.sql; notranslate">
CREATE TABLE IF NOT EXISTS USER (ID BIGINT IDENTITY PRIMARY KEY, NAME VARCHAR(60), USER_NAME VARCHAR(60), ACCESS_TIME TIMESTAMP, LOCKED BOOLEAN);
</pre>
<p><a href="https://github.com/javaspringexamples/springJdbcBatchOperations.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJdbcBatchOperations/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JDBC – DML Operations</title>
		<link>http://localhost/wordpress/2019/06/17/example-spring-4-jdbc-dml-operations/</link>
		<pubDate>Mon, 17 Jun 2019 16:45:44 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[DML Operations]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=615</guid>
		<description><![CDATA[This example presents the basic concept of running DML operations in Spring JDBC. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of running DML operations in Spring JDBC.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJDBC.dmlOperations&lt;/groupId&gt;
	&lt;artifactId&gt;dmlOperations&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
			&lt;artifactId&gt;lombok&lt;/artifactId&gt;
			&lt;version&gt;1.18.6&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

&lt;/project&gt;
</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import javax.sql.DataSource;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.jdbc.object.MappingSqlQuery;
import org.springframework.jdbc.object.SqlUpdate;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Configuration
public class Conf {
    @Bean
    public DataSource dataSource() {
        DriverManagerDataSource dataSource = new DriverManagerDataSource();
        dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
        dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
        dataSource.setUsername(&quot;sa&quot;);
        dataSource.setPassword(&quot;&quot;);
        return dataSource;
    }
    
    @Bean
    public JdbcTemplate jdbcTemplate() {
        JdbcTemplate jdbcTemplate = new JdbcTemplate();
        jdbcTemplate.setDataSource(dataSource());
        return jdbcTemplate;
    }

    @Bean
    public UserDao userDao() {
        UserDaoJdbcImpl userDao = new UserDaoJdbcImpl();
        userDao.setJdbcTemplate(jdbcTemplate());
        userDao.setUserByIdQuery(userByIdQuery());
        userDao.setUserInsert(userInsert());
        userDao.setUserUpdate(userUpdate());
        userDao.setUserDelete(userDelete());
        return userDao;
    }
    
    @Bean
    public MappingSqlQuery&lt;User&gt; userByIdQuery() {
        UserFindByIdQuery query = new UserFindByIdQuery(dataSource());
        return query;
    }
    
    @Bean
    public SqlUpdate userInsert() {
    	UserInsert userInsert = new UserInsert(dataSource());
    	return userInsert;
    }
    
    @Bean
    public SqlUpdate userUpdate() {
    	UserUpdate userUpdate = new UserUpdate(dataSource());
    	return userUpdate;
    }
    
    @Bean
    public SqlUpdate userDelete() {
    	UserDelete userDelete = new UserDelete(dataSource());
    	return userDelete;
    }
}

</pre>
<pre class="brush: java; title: ExceptionDeleteFailed.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import org.springframework.dao.DataAccessException;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class ExceptionDeleteFailed extends DataAccessException {
	
	public ExceptionDeleteFailed(String msg) {
		super(msg);
	}
}

</pre>
<pre class="brush: java; title: ExceptionInsertFailed.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import org.springframework.dao.DataAccessException;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class ExceptionInsertFailed extends DataAccessException {
	public ExceptionInsertFailed(String msg) {
		super(msg);
	}
}

</pre>
<pre class="brush: java; title: ExceptionUpdateFailed.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import org.springframework.dao.DataAccessException;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class ExceptionUpdateFailed extends DataAccessException {
	public ExceptionUpdateFailed(String msg) {
		super(msg);
	}
}

</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import java.sql.SQLException;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {
	public static void main(String[] args) throws SQLException {
		AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);

		UserDao userDao = applicationContext.getBean(UserDao.class);

		User user = new User();
		user.setName(&quot;Wow&quot;);
		user.setUserName(&quot;Wiw&quot;);
		user.setLocked(true);

		userDao.insert(user);

		user = userDao.find(user.getId());

		System.out.println(user.getId() + &quot;,&quot; + user.getName() + &quot;,&quot; + user.getUserName() + &quot;,&quot; + user.isLocked());

		user.setLocked(false);
		userDao.update(user);

		user = userDao.find(user.getId());
		System.out.println(user.isLocked());

		userDao.delete(user.getId());

		user = userDao.find(user.getId());

		System.out.println(user);
	}
}

</pre>
<pre class="brush: java; title: User.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import java.util.Date;

import lombok.Data;
import lombok.ToString;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Data
public class User {
	private long id;
	private String name;
	private String userName;
	@ToString.Exclude
	private Date accessTime;
	private boolean locked;
}
</pre>
<pre class="brush: java; title: UserDao.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface UserDao {
    public void insert(User user);
    public void update(User user);
    public void delete(long userId);
    public User find(long userId);
}


</pre>
<pre class="brush: java; title: UserDaoJdbcImpl.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Collections;
import java.util.List;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.jdbc.object.MappingSqlQuery;
import org.springframework.jdbc.object.SqlUpdate;
import org.springframework.jdbc.support.GeneratedKeyHolder;
/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserDaoJdbcImpl implements UserDao {

	private JdbcTemplate jdbcTemplate;
	private NamedParameterJdbcTemplate namedParameterJdbcTemplate;

	private MappingSqlQuery&lt;User&gt; userByIdQuery;
	private SqlUpdate userInsert;
	private SqlUpdate userUpdate;
	private SqlUpdate userDelete;

	public void setUserInsert(SqlUpdate userInsert) {
		this.userInsert = userInsert;
	}

	public void setUserUpdate(SqlUpdate userUpdate) {
		this.userUpdate = userUpdate;
	}

	public void setUserDelete(SqlUpdate userDelete) {
		this.userDelete = userDelete;
	}

	public void setUserByIdQuery(MappingSqlQuery&lt;User&gt; userByIdQuery) {
		this.userByIdQuery = userByIdQuery;
	}

	public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
		this.jdbcTemplate = jdbcTemplate;
		namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(jdbcTemplate);
	}

	public void insert(User user) {
		GeneratedKeyHolder keyHolder = new GeneratedKeyHolder();
		int count = userInsert.update(new Object[] { user.getName(), user.getUserName(), user.isLocked() }, keyHolder);
		if (count != 1)
			throw new ExceptionInsertFailed(&quot;Cannot insert user&quot;);
		user.setId(keyHolder.getKey().longValue());
	}

	public void update(User user) {
		int count = userUpdate.update(user.getName(), user.getUserName(), user.isLocked(), user.getId());
		if (count != 1)
			throw new ExceptionUpdateFailed(&quot;Cannot update user&quot;);
	}

	public void delete(long userId) {
		int count = userDelete.update(userId);
		if (count != 1)
			throw new ExceptionDeleteFailed(&quot;Cannot delete user&quot;);
	}

	public User find(long userId) {
		return userByIdQuery.findObject(userId);
	}
}

</pre>
<pre class="brush: java; title: UserDelete.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import java.sql.Types;

import javax.sql.DataSource;

import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.object.SqlUpdate;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserDelete extends SqlUpdate {
    public UserDelete(DataSource dataSource) {
        super(dataSource, &quot;delete user where id = ?&quot;);
        setParameters(new SqlParameter[]{new SqlParameter(Types.BIGINT)});
        compile();
    }
}

</pre>
<pre class="brush: java; title: UserFindByIdQuery.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Types;

import javax.sql.DataSource;

import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.object.MappingSqlQuery;
/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserFindByIdQuery extends MappingSqlQuery&lt;User&gt; {

	public UserFindByIdQuery(DataSource dataSource) {
		super(dataSource, &quot;select id,name,user_name,locked from user where id = ?&quot;);
		declareParameter(new SqlParameter(Types.BIGINT));
		compile();

	}

	@Override
	protected User mapRow(ResultSet rs, int rowNum) throws SQLException {
		User user = new User();
		user.setId(rs.getLong(&quot;id&quot;));
		user.setName(rs.getString(&quot;name&quot;));
		user.setUserName(rs.getString(&quot;user_name&quot;));
		user.setLocked(rs.getBoolean(&quot;locked&quot;));
		return user;
	}
}
</pre>
<pre class="brush: java; title: UserInsert.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import java.sql.Types;

import javax.sql.DataSource;

import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.object.SqlUpdate;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserInsert extends SqlUpdate {
	public UserInsert(DataSource dataSource) {
		super(dataSource, &quot;insert into user(name,user_name,locked) values(?,?,?)&quot;);
		setParameters(new SqlParameter[] { new SqlParameter(Types.VARCHAR), new SqlParameter(Types.VARCHAR),
				new SqlParameter(Types.BOOLEAN) });
		setReturnGeneratedKeys(true);
		setGeneratedKeysColumnNames(new String[] { &quot;id&quot; });
		compile();
	}
}

</pre>
<pre class="brush: java; title: UserUpdate.java; notranslate">
package javaspringexamples.springJDBC.dmlOperations;

import java.sql.Types;

import javax.sql.DataSource;

import org.springframework.jdbc.core.SqlParameter;
import org.springframework.jdbc.object.SqlUpdate;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserUpdate extends SqlUpdate {
	public UserUpdate(DataSource dataSource) {
		super(dataSource, &quot;update user set (name,user_name, locked) = (?,?,?) where id=?&quot;);
		setParameters(new SqlParameter[] { new SqlParameter(Types.VARCHAR), new SqlParameter(Types.VARCHAR),
				new SqlParameter(Types.BOOLEAN), new SqlParameter(Types.BIGINT) });
		compile();
	}
}

</pre>
<p><a href="https://github.com/javaspringexamples/SpringJDBCDmlOperations.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/SpringJDBCDmlOperations/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JDBC – SQL Queries</title>
		<link>http://localhost/wordpress/2019/06/01/example-spring-4-jdbc-sql-queries/</link>
		<pubDate>Sat, 01 Jun 2019 14:41:11 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Spring JDBC]]></category>
		<category><![CDATA[SQL Queries]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=601</guid>
		<description><![CDATA[This example presents the basic concept of using SQL queries in Spring JDBC. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using SQL queries in Spring JDBC.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJDBC&lt;/groupId&gt;
	&lt;artifactId&gt;springJdbcRunningSQLQueries&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
			&lt;artifactId&gt;lombok&lt;/artifactId&gt;
			&lt;version&gt;1.18.6&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
&lt;/project&gt;
</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJDBC.runningSqlQueries;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.Resource;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.jdbc.datasource.init.DataSourceInitializer;
import org.springframework.jdbc.datasource.init.DatabasePopulator;
import org.springframework.jdbc.datasource.init.ResourceDatabasePopulator;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Configuration
public class Conf {

	@Value(&quot;classpath:schema.sql&quot;)
	private Resource schemaScript;

	@Value(&quot;classpath:data.sql&quot;)
	private Resource dataScript;

	@Bean
	public DataSource dataSource() {
		DriverManagerDataSource dataSource = new DriverManagerDataSource();
		dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
		dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
		dataSource.setUsername(&quot;sa&quot;);
		dataSource.setPassword(&quot;&quot;);
		return dataSource;
	}

	@Bean
	public DataSourceInitializer dataSourceInitializer(final DataSource dataSource) {
		final DataSourceInitializer initializer = new DataSourceInitializer();
		initializer.setDataSource(dataSource);
		initializer.setDatabasePopulator(databasePopulator());
		return initializer;
	}

	private DatabasePopulator databasePopulator() {
		final ResourceDatabasePopulator populator = new ResourceDatabasePopulator();
		populator.addScript(schemaScript);
		populator.addScript(dataScript);
		return populator;
	}

	@Bean
	public JdbcTemplate jdbcTemplate() {
		JdbcTemplate jdbcTemplate = new JdbcTemplate();
		jdbcTemplate.setDataSource(dataSource());
		return jdbcTemplate;
	}

	@Bean
	public UserDao userDao() {
		UserDaoImpl userDao = new UserDaoImpl();
		userDao.setJdbcTemplate(jdbcTemplate());
		return userDao;
	}
}
</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJDBC.runningSqlQueries;

import java.sql.SQLException;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {
	public static void main(String[] args) throws SQLException {
		AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);
		
		UserDao userDao = applicationContext.getBean(UserDao.class);
		
		User user = userDao.findById(999L);
		
		System.out.println(user.getId());
		System.out.println(user.getName());
		System.out.println(user.getAccessTime());
		System.out.println(user.isLocked());
	}
}
</pre>
<pre class="brush: java; title: User.java; notranslate">
package javaspringexamples.springJDBC.runningSqlQueries;

import java.util.Date;

import lombok.Data;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Data
public class User {
	private long id;
	private String name;
	private String userName;
	private Date accessTime;
	private boolean locked;
}

</pre>
<pre class="brush: java; title: UserDao.java; notranslate">
package javaspringexamples.springJDBC.runningSqlQueries;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface UserDao {
	public User findById(long usertId);
}
</pre>
<pre class="brush: java; title: UserDaoImpl.java; notranslate">
package javaspringexamples.springJDBC.runningSqlQueries;

import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowMapper;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserDaoImpl implements UserDao {

	private JdbcTemplate jdbcTemplate;

	public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
		this.jdbcTemplate = jdbcTemplate;
	}

	public User findById(long userId) {
		return jdbcTemplate.queryForObject(&quot;SELECT id, name, user_name, access_time, locked FROM USER WHERE id = ?&quot;,
				new RowMapper&lt;User&gt;() {
					public User mapRow(ResultSet rs, int rowNum) throws SQLException {
						User user = new User();
						user.setId(rs.getLong(&quot;id&quot;));
						user.setName(rs.getString(&quot;name&quot;));
						user.setUserName(rs.getString(&quot;user_name&quot;));
						user.setAccessTime(rs.getTimestamp(&quot;access_time&quot;));
						user.setLocked(rs.getBoolean(&quot;locked&quot;));
						return user;
					}

				}, userId);
	}
}
</pre>
<pre class="brush: java; title: data.sql; notranslate">
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (999L, 'Mounir SAHRANI', 'msahrani', '2019-01-01',false);
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (256L, 'Laurent SOURDEAU', 'lsourdeau', '2019-06-01',false);
</pre>
<pre class="brush: java; title: schema.sql; notranslate">
CREATE TABLE IF NOT EXISTS USER (ID BIGINT IDENTITY PRIMARY KEY, NAME VARCHAR(60), USER_NAME VARCHAR(60), ACCESS_TIME TIMESTAMP, LOCKED BOOLEAN);
</pre>
<p><a href="https://github.com/javaspringexamples/springJdbcRunningSQLQueries.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJdbcRunningSQLQueries/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JDBC – Queries in clause</title>
		<link>http://localhost/wordpress/2019/06/01/example-spring-4-jdbc-queries-in-clause/</link>
		<pubDate>Sat, 01 Jun 2019 14:38:30 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[Queries in clause]]></category>
		<category><![CDATA[Spring JDBC]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=599</guid>
		<description><![CDATA[This example presents the basic concept of using queries in clause Spring JDBC. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using queries in clause Spring JDBC.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJDBC&lt;/groupId&gt;
	&lt;artifactId&gt;springJdbcQueriesInClause&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
			&lt;artifactId&gt;lombok&lt;/artifactId&gt;
			&lt;version&gt;1.18.6&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

&lt;/project&gt;
</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJDBC.queriesInClause;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.Resource;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.jdbc.datasource.init.DataSourceInitializer;
import org.springframework.jdbc.datasource.init.DatabasePopulator;
import org.springframework.jdbc.datasource.init.ResourceDatabasePopulator;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Configuration
public class Conf {

	@Value(&quot;classpath:schema.sql&quot;)
	private Resource schemaScript;

	@Value(&quot;classpath:data.sql&quot;)
	private Resource dataScript;

	@Bean
	public DataSource dataSource() {
		DriverManagerDataSource dataSource = new DriverManagerDataSource();
		dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
		dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
		dataSource.setUsername(&quot;sa&quot;);
		dataSource.setPassword(&quot;&quot;);
		return dataSource;
	}

	@Bean
	public DataSourceInitializer dataSourceInitializer(final DataSource dataSource) {
		final DataSourceInitializer initializer = new DataSourceInitializer();
		initializer.setDataSource(dataSource);
		initializer.setDatabasePopulator(databasePopulator());
		return initializer;
	}

	private DatabasePopulator databasePopulator() {
		final ResourceDatabasePopulator populator = new ResourceDatabasePopulator();
		populator.addScript(schemaScript);
		populator.addScript(dataScript);
		return populator;
	}

	@Bean
	public JdbcTemplate jdbcTemplate() {
		JdbcTemplate jdbcTemplate = new JdbcTemplate();
		jdbcTemplate.setDataSource(dataSource());
		return jdbcTemplate;
	}

	@Bean
	public UserDao userDao() {
		UserDaoImpl userDao = new UserDaoImpl();
		userDao.setJdbcTemplate(jdbcTemplate());
		return userDao;
	}
}
</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJDBC.queriesInClause;

import java.sql.SQLException;
import java.util.List;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class Main {
	public static void main(String[] args) throws SQLException {
		AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);

		UserDao userDao = applicationContext.getBean(UserDao.class);

		List&lt;User&gt; users = userDao.find(new Long[] { 65L, 999L });
		for (User user : users)
			System.out.println(user.toString());
	}
}

</pre>
<pre class="brush: java; title: User.java; notranslate">
package javaspringexamples.springJDBC.queriesInClause;

import java.util.Date;

import lombok.Data;
import lombok.ToString;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Data
public class User {
	private long id;
	private String name;
	private String userName;
	@ToString.Exclude
	private Date accessTime;
	private boolean locked;
}
</pre>
<pre class="brush: java; title: UserDao.java; notranslate">
package javaspringexamples.springJDBC.queriesInClause;

import java.util.List;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface UserDao {
	public List&lt;User&gt; find(Long... userIds);
}
</pre>
<pre class="brush: java; title: UserDaoImpl.java; notranslate">
package javaspringexamples.springJDBC.queriesInClause;

import java.util.Arrays;
import java.util.List;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.jdbc.core.namedparam.SqlParameterSource;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserDaoImpl implements UserDao {

	private JdbcTemplate jdbcTemplate;
	private NamedParameterJdbcTemplate namedParameterJdbcTemplate;
	private UserRowMapper userRowMapper = new UserRowMapper();

	public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
		this.jdbcTemplate = jdbcTemplate;
		namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(jdbcTemplate);
	}

	public List&lt;User&gt; find(Long... userIds) {
		SqlParameterSource sqlParameterSource = new MapSqlParameterSource(&quot;userIds&quot;, Arrays.asList(userIds));
		return namedParameterJdbcTemplate.query(&quot;select * from user where id in (:userIds)&quot;, sqlParameterSource,
				userRowMapper);
	}
}

</pre>
<pre class="brush: java; title: UserRowMapper.java; notranslate">
package javaspringexamples.springJDBC.queriesInClause;

import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.jdbc.core.RowMapper;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserRowMapper implements RowMapper&lt;User&gt; {

	public User mapRow(ResultSet rs, int rowNum) throws SQLException {
		User user = new User();
		user.setId(rs.getLong(&quot;id&quot;));
		user.setName(rs.getString(&quot;name&quot;));
		user.setUserName(rs.getString(&quot;user_name&quot;));
		user.setAccessTime(rs.getTimestamp(&quot;access_time&quot;));
		user.setLocked(rs.getBoolean(&quot;locked&quot;));
		return user;
	}

}

</pre>
<pre class="brush: java; title: data.sql; notranslate">
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (999L, 'Mounir SAHRANI', 'msahrani', '2019-01-01',false);
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (256L, 'Laurent SOURDEAU', 'lsourdeau', '2019-06-01',false);
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (65L, 'John SMITH', 'jsmith', '2019-06-01',true);
</pre>
<pre class="brush: java; title: schema.sql; notranslate">
CREATE TABLE IF NOT EXISTS USER (ID BIGINT IDENTITY PRIMARY KEY, NAME VARCHAR(60), USER_NAME VARCHAR(60), ACCESS_TIME TIMESTAMP, LOCKED BOOLEAN);
</pre>
<p><a href="https://github.com/javaspringexamples/springJdbcQueriesInClause.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJdbcQueriesInClause/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
		<item>
		<title>Example Spring 4 JDBC – PreparedStatements</title>
		<link>http://localhost/wordpress/2019/06/01/example-spring-4-jdbc-preparedstatements/</link>
		<pubDate>Sat, 01 Jun 2019 14:36:43 +0000</pubDate>
		<dc:creator><![CDATA[admin]]></dc:creator>
				<category><![CDATA[PreparedStatements]]></category>
		<category><![CDATA[Spring JDBC]]></category>

		<guid isPermaLink="false">http://localhost/wordpress/?p=597</guid>
		<description><![CDATA[This example presents the basic concept of using prepared statements in Spring JDBC. The technologies used are : &#8211; Spring 4.3.18 &#8211; H2 1.3 &#8211; Lombok 1.18 &#8211; JDK 1.80 &#8211; Maven 3.3.9 You can...]]></description>
				<content:encoded><![CDATA[<p>This example presents the basic concept of using prepared statements in Spring JDBC.</p>
<p>The technologies used are :</p>
<ul>
 &#8211; Spring 4.3.18<br />
 &#8211; H2 1.3<br />
 &#8211; Lombok 1.18<br />
 &#8211; JDK 1.80<br />
 &#8211; Maven 3.3.9
</ul>
<p>You can convert this example to an Eclipse IDE project by going to folder where is the pom.xml is, and use the command :</p>
<pre class="brush: bash; title: ; notranslate">mvn eclipse:eclipse</pre>
<p>Inspired from « Beginning Spring » Mert Caliskan, Kenan Sevindik, Rod Johnson (Foreword by), Jürgen Höller (Foreword by).</p>
<pre class="brush: xml; title: pom.xml; notranslate">
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;javaspringexamples.springJDBC&lt;/groupId&gt;
	&lt;artifactId&gt;springJdbcPreparedStatements&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

	&lt;properties&gt;
		&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
		&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;4.3.18.RELEASE&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;com.h2database&lt;/groupId&gt;
			&lt;artifactId&gt;h2&lt;/artifactId&gt;
			&lt;version&gt;1.3.175&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;dependency&gt;
			&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
			&lt;artifactId&gt;lombok&lt;/artifactId&gt;
			&lt;version&gt;1.18.6&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

&lt;/project&gt;
</pre>
<pre class="brush: java; title: Conf.java; notranslate">
package javaspringexamples.springJDBC.preparedStatements;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.Resource;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import org.springframework.jdbc.datasource.init.DataSourceInitializer;
import org.springframework.jdbc.datasource.init.DatabasePopulator;
import org.springframework.jdbc.datasource.init.ResourceDatabasePopulator;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Configuration
public class Conf {

	@Value(&quot;classpath:schema.sql&quot;)
	private Resource schemaScript;

	@Value(&quot;classpath:data.sql&quot;)
	private Resource dataScript;

	@Bean
	public DataSource dataSource() {
		DriverManagerDataSource dataSource = new DriverManagerDataSource();
		dataSource.setDriverClassName(&quot;org.h2.Driver&quot;);
		dataSource.setUrl(&quot;jdbc:h2:tcp://localhost/~/javaspringexamples&quot;);
		dataSource.setUsername(&quot;sa&quot;);
		dataSource.setPassword(&quot;&quot;);
		return dataSource;
	}

	@Bean
	public DataSourceInitializer dataSourceInitializer(final DataSource dataSource) {
		final DataSourceInitializer initializer = new DataSourceInitializer();
		initializer.setDataSource(dataSource);
		initializer.setDatabasePopulator(databasePopulator());
		return initializer;
	}

	private DatabasePopulator databasePopulator() {
		final ResourceDatabasePopulator populator = new ResourceDatabasePopulator();
		populator.addScript(schemaScript);
		populator.addScript(dataScript);
		return populator;
	}

	@Bean
	public JdbcTemplate jdbcTemplate() {
		JdbcTemplate jdbcTemplate = new JdbcTemplate();
		jdbcTemplate.setDataSource(dataSource());
		return jdbcTemplate;
	}

	@Bean
	public UserDao userDao() {
		UserDaoImpl userDao = new UserDaoImpl();
		userDao.setJdbcTemplate(jdbcTemplate());
		return userDao;
	}
}

</pre>
<pre class="brush: java; title: Main.java; notranslate">
package javaspringexamples.springJDBC.preparedStatements;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import org.springframework.context.annotation.AnnotationConfigApplicationContext;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class Main {
	public static void main(String[] args) throws SQLException {
		AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(Conf.class);

		UserDao userDao = applicationContext.getBean(UserDao.class);

		List&lt;User&gt; users = new ArrayList&lt;&gt;();
		users.addAll(userDao.findByUserName(&quot;jsmith&quot;));
		users.addAll(userDao.findLocked(false));
		users.add(userDao.findById(65L));

		for (User user : users)
			System.out.println(user.toString());
	}
}
</pre>
<pre class="brush: java; title: User.java; notranslate">
package javaspringexamples.springJDBC.preparedStatements;

import java.util.Date;

import lombok.Data;
import lombok.ToString;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
@Data
public class User {
	private long id;
	private String name;
	private String userName;
	@ToString.Exclude
	private Date accessTime;
	private boolean locked;
}
</pre>
<pre class="brush: java; title: UserDao.java; notranslate">
package javaspringexamples.springJDBC.preparedStatements;

import java.util.List;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public interface UserDao {
	public User findById(long usertId);
	public List&lt;User&gt; findByUserName(String userName);
	public List&lt;User&gt; findLocked(boolean locked);
}
</pre>
<pre class="brush: java; title: UserDaoImpl.java; notranslate">
package javaspringexamples.springJDBC.preparedStatements;

import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Types;
import java.util.List;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.PreparedStatementCreatorFactory;
import org.springframework.jdbc.core.PreparedStatementSetter;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserDaoImpl implements UserDao {

	private JdbcTemplate jdbcTemplate;
	private NamedParameterJdbcTemplate namedParameterJdbcTemplate;
	private UserRowMapper userRowMapper = new UserRowMapper();

	public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
		this.jdbcTemplate = jdbcTemplate;
		namedParameterJdbcTemplate = new NamedParameterJdbcTemplate(jdbcTemplate);
	}

	public User findById(long userId) {
		return jdbcTemplate.queryForObject(&quot;SELECT id, name, user_name, access_time, locked FROM USER WHERE id = ?&quot;,
				userRowMapper, userId);
	}

	public List&lt;User&gt; findByUserName(String userName) {
		PreparedStatementCreatorFactory psCreatorFactory = new PreparedStatementCreatorFactory(
				&quot;SELECT id, name, user_name, access_time, locked FROM USER WHERE user_name like ?&quot;,
				new int[] { Types.VARCHAR });
		return jdbcTemplate.query(psCreatorFactory.newPreparedStatementCreator(new Object[] { userName }),
				userRowMapper);
	}

	public List&lt;User&gt; findLocked(boolean locked) {
		return jdbcTemplate.query(&quot;SELECT id, name, user_name, access_time, locked FROM USER WHERE locked = ?&quot;,
				new PreparedStatementSetter() {
					@Override
					public void setValues(PreparedStatement ps) throws SQLException {
						ps.setBoolean(1, locked);
					}
				}, userRowMapper);
	}
}

</pre>
<pre class="brush: java; title: UserRowMapper.java; notranslate">
package javaspringexamples.springJDBC.preparedStatements;

import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.jdbc.core.RowMapper;

/**
 * 
 * @author mounir.sahrani@gmail.com
 *
 */
public class UserRowMapper implements RowMapper&lt;User&gt; {

	public User mapRow(ResultSet rs, int rowNum) throws SQLException {
		User user = new User();
		user.setId(rs.getLong(&quot;id&quot;));
		user.setName(rs.getString(&quot;name&quot;));
		user.setUserName(rs.getString(&quot;user_name&quot;));
		user.setAccessTime(rs.getTimestamp(&quot;access_time&quot;));
		user.setLocked(rs.getBoolean(&quot;locked&quot;));
		return user;
	}

}

</pre>
<pre class="brush: java; title: data.sql; notranslate">
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (999L, 'Mounir SAHRANI', 'msahrani', '2019-01-01',false);
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (256L, 'Laurent SOURDEAU', 'lsourdeau', '2019-06-01',false);
MERGE INTO USER (ID, NAME, USER_NAME, ACCESS_TIME, LOCKED) values (65L, 'John SMITH', 'jsmith', '2019-06-01',true);
</pre>
<pre class="brush: java; title: schema.sql; notranslate">
CREATE TABLE IF NOT EXISTS USER (ID BIGINT IDENTITY PRIMARY KEY, NAME VARCHAR(60), USER_NAME VARCHAR(60), ACCESS_TIME TIMESTAMP, LOCKED BOOLEAN);
</pre>
<p><a href="https://github.com/javaspringexamples/springJdbcPreparedStatements.git">Get the sources of the example from the following GitHub url</a></p>
<p>Or <a href="https://github.com/javaspringexamples/springJdbcPreparedStatements/archive/master.zip">Download a .zip file</a></p>
]]></content:encoded>
			</item>
	</channel>
</rss>
